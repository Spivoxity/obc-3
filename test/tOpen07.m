MODULE tOpen07;

(*<<
15
>>*)

IMPORT Out;

PROCEDURE Sum(a: ARRAY OF INTEGER): INTEGER;
  VAR i, s: INTEGER;
BEGIN
  s := 0;
  FOR i := 0 TO LEN(a)-1 DO s := s + a[i] END;
  RETURN s
END Sum;

VAR b: ARRAY 5 OF INTEGER;

PROCEDURE Main;
VAR j: INTEGER;
BEGIN
  FOR j := 0 TO LEN(b)-1 DO b[j] := j+1 END
END Main;

BEGIN
  Main;
  Out.Int(Sum(b), 0); Out.Ln
END tOpen07.

(*[[
!! (SYMFILE #tOpen07 STAMP #tOpen07.%main 1 #tOpen07.m)
!! (CHKSUM STAMP)
!! 
MODULE tOpen07 STAMP 0
IMPORT Out STAMP
ENDHDR

PROC tOpen07.Sum 12 4 0x00100001
! PROCEDURE Sum(a: ARRAY OF INTEGER): INTEGER;
!   s := 0;
CONST 0
STLW -8
!   FOR i := 0 TO LEN(a)-1 DO s := s + a[i] END;
LDLW 16
DEC
STLW -12
CONST 0
STLW -4
LABEL L1
LDLW -4
LDLW -12
JGT L2
LDLW -8
LDLW 12
LDLW -4
LDLW 16
BOUND 13
LDIW
PLUS
STLW -8
INCL -4
JUMP L1
LABEL L2
!   RETURN s
LDLW -8
RETURNW
END

PROC tOpen07.Main 4 4 0
! PROCEDURE Main;
!   FOR j := 0 TO LEN(b)-1 DO b[j] := j+1 END
CONST 0
STLW -4
LABEL L3
LDLW -4
CONST 4
JGT L4
LDLW -4
INC
GLOBAL tOpen07.b
LDLW -4
CONST 5
BOUND 22
STIW
INCL -4
JUMP L3
LABEL L4
RETURN
END

PROC tOpen07.%main 0 4 0
!   Main;
GLOBAL tOpen07.Main
CALL 0
!   Out.Int(Sum(b), 0); Out.Ln
CONST 0
CONST 5
GLOBAL tOpen07.b
GLOBAL tOpen07.Sum
CALLW 2
GLOBAL Out.Int
CALL 2
GLOBAL Out.Ln
CALL 0
RETURN
END

! Global variables
GLOVAR tOpen07.b 20

! End of file
]]*)
